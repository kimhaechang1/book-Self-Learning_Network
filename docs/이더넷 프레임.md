## 물리계층과 데이터링크 계층

`물 데 네 전 세 표 응` 에서 앞 두단계에 속하는 계층이다.

물론 TCP/IP 5계층에서도 속하는 계층이다.

물리계층은 0과 1의 비트신호를 변환하여 알맞은 통신매체로 송수신하는 계층이고

데이터링크 계층은 물리계층에서 받은 비트데이터에 페이로드와 헤더 그리고 트레일러를 붙이거나 떼서 상, 하위 계층으로 보낸다.

주요 역할은 오류 검출 및 MAC주소를 통한 네트워크 내 송 수신지 결정 그리고 추가적인 충돌 제어를 수행한다.

물리 계층과 데이터링크 계층에 공통적으로 통하는 통신매체가 바로 유선 LAN이고 이를 구축한 방식중 하나인 `이더넷`이다.

데이터링크 계층의 PDU(`Protocol Data Unit`)은 데이터 프레임(`Data frame`)으로 즉 이더넷 프레임의 구성은 다음과 같다.

```
|------------------------- 22byte ----------------------| 46 ~ 1500 |--  2byte   --|
|------------------------- 헤더 ------------------------| 페이로드  |-- 트레일러 --|

|프리앰블|MAC 송신지 주소|MAC 수신지 주소|타입 혹은 주소|   데이터  |FCS[CRC Check]|
```

### 이더넷 프레임: 헤더

- 프리앰블: 첫 8바이트 정보로서 수신지에서 프리앰블을 통해 이더넷 프레임이 오고있음을 인지함. 즉 송수신지간의 동기화를 위해 사용됨

- MAC 송 수신지 주소: MAC 주소는 네트워크 내에 물리적인 주소로서 네트워크 인터페이스 장치마다 부여되어있다. 일반적으로 고유하고 변경되지 않는다. (무조건 변경되지 않는다는 것은 아니나, 네트워크 내에서 겹칠 확률이 매우 낮다는 것), 총 6바이트로 16진수 12자리로 구성되어 있다.

- 타입 혹은 주소: 2바이트로 필드값의 크기가 16진수 이하일 경우 `프레임의 크기인 길이`를 나타내고, 반대의 경우 이더넷 프레임이 캡슐화한 정보인 `이더타입`을 나타낸다.
    - 대표적으로 이더타입에는 상위 계층에서 사용된 프로토콜 이름이 명시된다.

### 이더넷 프레임: 페이로드

페이로드에는 데이터가 들어가며 캡슐화에서는 상위계층까지의 내용을 페이로드에 담고 이더넷 프레임을 위한 헤더와 트레일러를 붙인다.

역 캡슐화 과정에서는 이더넷 프레임에 필요한 헤더와 트레일러 정보를 읽어들이고 페이로드를 상위 계층으로 보낸다.

데이터 부분에서 중요한점은 최소 46 바이트라는 점인데, 이는 즉 46보다 작더라도 46을 마저 채워주는 비트가 존재한다는 것

이 비트를 패딩 비트(`padding`)라고하여 0으로 가득 채워버린다.

### 이더넷 프레임: 트레일러

트레일러에는 주로 2바이트짜리 FCS(`Frame Check Sequence`)필드가 있다.

이는 수신한 이더넷 프레임에 오류가 있는지 검사하는 목적으로 사용된다.

주로 CRC(`Cyclic Redundency Check`) 즉, 순환 중복 검사라고 불리는 오류 검출용 값이 들어간다.

검사 원리는 송신자 이더넷 프레임을 구성할 때, 헤더의 프리앰블 바이트를 제외한 나머지 바이트들로 CRC값을 계산 후 FCS에 명시하여 전송하면

수신자가 이를 데이터링크 계층에서 오류검사를 진행할 때, 동일하게 프리앰블 바이트와 FCS 바이트를 제외하고 CRC값을 계산하고 

FCS에 명시된 CRC와 비교하여 오류나 손상된 이더넷 프레임인지 검사하게 된다.

### 토큰 링

기존의 물리계층과 데이터링크 계층을 위한 통신매체로 LAN이 있고 이를 구축하는 방법중 하나인 이더넷 표준이 있지만

토큰 링 방식도 LAN을 구축하는 하나의 방법이다.

토큰 링 방식은 네트워크 내에 노드들이 토큰을 서로 번갈아가면서 주고받으며, 토큰을 가진 노드만이 다른 노드를 향해 메세지를 전송할 수 있다.

이 때 토큰을 획득하지 못한 노드는 송신할 수 없다.